<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Happy Birthday Ayy</title>
    <style>
      body {
        margin: 0;
        background: #ffd6e0;
        font-family: "Comic Sans MS", cursive, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        overflow: hidden;
      }

      /* Love Lock Screen */
      .love-lock {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 9998;
        transition: all 0.5s ease;
      }

      .love-lock.hidden {
        opacity: 0;
        pointer-events: none;
      }

      .love-heart {
        font-size: 100px;
        animation: heartbeat 1.5s infinite;
        margin-bottom: 20px;
        filter: drop-shadow(0 5px 15px rgba(255, 105, 180, 0.5));
      }

      .love-message {
        font-size: 28px;
        color: white;
        text-align: center;
        margin-bottom: 30px;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
      }

      .unlock-btn {
        padding: 12px 30px;
        background: white;
        border: none;
        border-radius: 50px;
        font-size: 18px;
        color: #ff6b88;
        cursor: pointer;
        font-weight: bold;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s;
      }

      .unlock-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      }

      @keyframes heartbeat {
        0% {
          transform: scale(1);
        }
        25% {
          transform: scale(1.1);
        }
        50% {
          transform: scale(1);
        }
        75% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      /* Passcode Screen */
      .passcode-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(255, 214, 224, 0.95);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        backdrop-filter: blur(5px);
      }

      .passcode-box {
        background: white;
        padding: 30px;
        border-radius: 25px;
        text-align: center;
        box-shadow: 0 10px 30px rgba(255, 105, 180, 0.3);
        position: relative;
        width: 320px;
        border: 3px solid #ff85a2;
        animation: bounceIn 0.8s;
      }

      .passcode-title {
        font-size: 24px;
        color: #ff6b88;
        margin-bottom: 15px;
        font-weight: bold;
      }

      .passcode-subtitle {
        font-size: 16px;
        color: #888;
        margin-bottom: 5px;
      }

      .passcode-name {
        font-family: "Courier New", monospace;
        font-size: 18px;
        color: #ff4757;
        margin-bottom: 20px;
        font-weight: bold;
        letter-spacing: 1px;
      }

      .heart-img {
        width: 100px;
        height: auto;
        margin-bottom: 20px;
        filter: drop-shadow(0 4px 8px rgba(255, 105, 180, 0.3));
        animation: pulse 2s infinite;
      }

      .keypad {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
        margin-top: 20px;
      }

      .keypad button {
        padding: 15px 0;
        font-size: 20px;
        border: none;
        border-radius: 12px;
        background: linear-gradient(45deg, #ffb6c1, #ff85a2);
        color: white;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.2s ease;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .keypad button:active {
        transform: scale(0.95);
      }

      .passcode-display {
        font-size: 24px;
        margin: 15px 0;
        letter-spacing: 5px;
        font-family: "Courier New", monospace;
        color: #000000;
        min-height: 40px;
        font-weight: bold;
        padding: 10px;
        background: #fff9fb;
        border-radius: 10px;
        border: 1px solid #ffb6c1;
      }

      .submit-btn {
        background: linear-gradient(45deg, #92b4ec, #3d5a80) !important;
      }

      .clear-btn {
        background: linear-gradient(45deg, #ff9aa2, #ff6b81) !important;
      }

      .hint {
        font-size: 14px;
        color: #ff85a2;
        margin-top: 15px;
        font-style: italic;
      }

      /* Main Card */
      .card {
        background: #fff9fb;
        border-radius: 25px;
        width: 400px;
        padding: 0;
        box-shadow: 0 10px 30px rgba(255, 105, 180, 0.3);
        overflow: hidden;
        border: 3px solid #ff85a2;
        display: none;
      }

      .header {
        background: linear-gradient(45deg, #ff85a2, #ffb6c1);
        padding: 15px 20px;
        color: white;
        font-weight: bold;
        font-size: 1.4em;
        display: flex;
        justify-content: space-between;
        align-items: center;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
      }

      .media {
        position: relative;
        height: 250px;
        overflow: hidden;
      }

      .slider {
        display: flex;
        transition: transform 0.5s ease;
        height: 100%;
      }

      .slider img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        flex-shrink: 0;
      }

      .slider-nav {
        position: absolute;
        top: 50%;
        width: 100%;
        display: flex;
        justify-content: space-between;
        transform: translateY(-50%);
        padding: 0 10px;
        box-sizing: border-box;
      }

      .slider-nav button {
        background: rgba(255, 255, 255, 0.5);
        border: none;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        font-size: 20px;
        color: #ff1493;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
      }

      .slider-nav button:hover {
        background: rgba(255, 255, 255, 0.8);
      }

      .message {
        padding: 20px;
        background: #fff;
      }

      .message h2 {
        margin: 0 0 15px;
        font-size: 1.4em;
        color: #ff1493;
        text-align: center;
      }

      .message p {
        margin: 0;
        font-size: 1em;
        color: #666;
        text-align: center;
        line-height: 1.5;
      }

      .pink-message {
        color: #ff1493;
        font-size: 1.2em;
        text-align: center;
        margin: 15px 0;
        font-weight: bold;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
      }

      .buttons {
        display: flex;
        justify-content: space-around;
        padding: 15px;
        background: #ffe5ec;
        border-top: 2px dashed #ff85a2;
      }

      .buttons button {
        padding: 10px 20px;
        background: linear-gradient(45deg, #ff85a2, #ffb6c1);
        border: none;
        color: white;
        border-radius: 50px;
        cursor: pointer;
        font-weight: bold;
        box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
        transition: all 0.3s;
      }

      .buttons button:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
      }

      .footer {
        text-align: center;
        font-size: 0.8em;
        color: #ff85a2;
        padding: 10px 0;
        background: #fff9fb;
      }

      /* Animations */
      @keyframes bounceIn {
        0% {
          transform: scale(0.8);
          opacity: 0;
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      /* Gallery Styles */
      .gallery-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 10000;
      }

      .gallery-container {
        width: 90%;
        max-width: 800px;
        background: white;
        border-radius: 20px;
        padding: 20px;
        box-shadow: 0 0 30px rgba(255, 105, 180, 0.5);
        position: relative;
      }

      .gallery-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .gallery-title {
        font-size: 1.5em;
        color: #ff1493;
        margin: 0;
      }

      .close-gallery {
        background: #ff6b81;
        border: none;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        font-size: 16px;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .gallery-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
      }

      .gallery-item {
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s;
        aspect-ratio: 1/1;
        position: relative;
        overflow: hidden;
      }
      .gallery-caption {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 10px;
        transform: translateY(100%);
        transition: transform 0.3s ease;
        text-align: center;
        font-size: 14px;
      }

      .gallery-item:hover {
        transform: scale(1.05);
      }
      .gallery-item:hover .gallery-caption {
        transform: translateY(0);
      }

      .gallery-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      /* Envelope Styles */
      .envelope-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.85);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 10000;
      }

      .envelope-container {
        position: relative;
        width: 350px;
        height: 450px;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .envelope {
        width: 100%;
        height: 60%;
        position: relative;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .envelope-back {
        position: absolute;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        z-index: 1;
      }

      .envelope-flap {
        position: absolute;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 0;
        border-style: solid;
        border-width: 0 175px 120px 175px;
        border-color: transparent transparent #ff6b88 transparent;
        z-index: 3;
        transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        transform-origin: center bottom;
      }

      .envelope.open .envelope-flap {
        transform: translateX(-50%) rotateX(-180deg);
      }

      .envelope-front {
        position: absolute;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
        border-radius: 8px;
        box-shadow: 0 10px 25px rgba(255, 105, 180, 0.5);
        z-index: 2;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 40px;
      }

      .envelope-front::after {
        content: "💌";
        text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
      }

      .envelope.open .envelope-front::after {
        opacity: 0.3;
        transform: scale(0.7);
      }

      .letter {
        position: absolute;
        width: 95%;
        height: 85%;
        background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
        border-radius: 8px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1),
          inset 0 1px 0 rgba(255, 255, 255, 0.8);
        padding: 25px;
        bottom: -100%;
        left: 50%;
        transform: translateX(-50%);
        transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        z-index: 4;
        opacity: 0;
        overflow-y: auto;
        font-family: "Georgia", serif;
        line-height: 1.6;
        border: 1px solid rgba(255, 133, 162, 0.2);
      }

      .envelope.open .letter {
        bottom: 15%;
        opacity: 1;
      }

      .close-envelope {
        position: absolute;
        top: 20px;
        right: 20px;
        background: linear-gradient(45deg, #ff6b81, #ff4757);
        border: none;
        color: white;
        width: 45px;
        height: 45px;
        border-radius: 50%;
        font-size: 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
        box-shadow: 0 4px 15px rgba(255, 107, 129, 0.4);
        transition: all 0.3s ease;
      }

      .close-envelope:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 20px rgba(255, 107, 129, 0.6);
      }

      .letter h3 {
        color: #2c3e50;
        font-size: 18px;
        margin-bottom: 15px;
        text-align: center;
        border-bottom: 2px solid #ff85a2;
        padding-bottom: 10px;
        font-weight: bold;
      }

      .letter p {
        color: #34495e;
        font-size: 14px;
        margin-bottom: 12px;
        text-align: justify;
        text-indent: 20px;
      }

      .letter p:last-child {
        text-align: right;
        font-style: italic;
        margin-top: 20px;
        color: #e74c3c;
        font-weight: bold;
        text-indent: 0;
      }

      /* Confetti */
      .confetti {
        position: fixed;
        width: 10px;
        height: 10px;
        background-color: #f00;
        border-radius: 50%;
        z-index: 99999;
      }

      /* Puzzle Overlay Styles */
      .puzzle-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        display: none;
        z-index: 10000;
        overflow-y: auto;
        padding: 20px 0;
      }

      .puzzle-container {
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 0 30px rgba(255, 105, 180, 0.5);
        max-width: 800px;
        width: 90%;
        margin: 20px auto;
        flex-direction: column;
        position: relative;
      }

      .puzzle-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: min-content; /* Pastikan konten tidak memaksa tinggi minimum */
      }
      .puzzle-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .puzzle-title {
        font-size: 1.5em;
        color: #ff1493;
        margin: 0;
      }

      .close-puzzle {
        background: #ff6b81;
        border: none;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        font-size: 16px;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .puzzle-content {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .puzzle-message {
        font-size: 18px;
        color: #ff1493;
        margin-bottom: 15px;
        font-weight: bold;
        text-align: center;
      }

      .puzzle-board {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 5px;
        margin-bottom: 20px;
        background: #ffe5ec;
        padding: 10px;
        border-radius: 10px;
      }

      .puzzle-slot {
        width: 100px;
        height: 100px;
        background: #fff9fb;
        border: 2px solid #ff85a2;
        border-radius: 5px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 24px;
        color: #ff85a2;
        transition: all 0.3s;
      }

      .puzzle-slot.filled {
        background-size: 300px 300px;
        background-repeat: no-repeat;
      }

      .puzzle-pieces {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 5px;
        background: #ffe5ec;
        padding: 10px;
        border-radius: 10px;
      }

      .puzzle-piece {
        width: 100px;
        height: 100px;
        background-size: 300px 300px;
        background-repeat: no-repeat;
        border: 2px solid #ff85a2;
        border-radius: 5px;
        cursor: pointer;
        transition: transform 0.2s;
      }

      .puzzle-piece:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
      }

      .puzzle-complete {
        display: none;
        text-align: center;
        padding: 20px;
      }

      .puzzle-complete img {
        max-width: 100%;
        border-radius: 10px;
        margin-bottom: 20px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .puzzle-complete h3 {
        color: #ff1493;
        font-size: 24px;
        margin-bottom: 10px;
      }

      .puzzle-complete p {
        color: #666;
        font-size: 16px;
        margin-bottom: 20px;
      }

      .puzzle-complete button {
        padding: 10px 20px;
        background: linear-gradient(45deg, #ff85a2, #ffb6c1);
        border: none;
        color: white;
        border-radius: 50px;
        cursor: pointer;
        font-weight: bold;
        box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
      }

      @media (max-width: 600px) {
        .puzzle-slot,
        .puzzle-piece {
          width: 80px;
          height: 80px;
        }

        .puzzle-board,
        .puzzle-pieces {
          gap: 3px;
          padding: 5px;
        }

        .puzzle-slot.filled {
          background-size: 240px 240px;
        }
      }
      .puzzle-reference {
        width: 300px;
        height: 300px;
        margin: 20px auto;
        border: 3px solid #ff85a2;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        background-size: cover;
        background-position: center;
        display: none; /* Initially hidden */
      }

      .puzzle-controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 15px;
      }

      .puzzle-controls button {
        padding: 8px 15px;
        background: linear-gradient(45deg, #ff85a2, #ffb6c1);
        border: none;
        color: white;
        border-radius: 50px;
        cursor: pointer;
        font-weight: bold;
        box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
        transition: all 0.3s;
      }

      .puzzle-controls button:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
      }

      .show-reference {
        background: linear-gradient(45deg, #92b4ec, #3d5a80) !important;
      }
      .puzzle-piece {
        background-size: cover !important;
        background-position: center !important;
      }
    </style>
  </head>
  <body>
    <!-- Love Lock Screen -->
    <div class="love-lock" id="love-lock">
      <div class="love-heart">💖</div>
      <div class="love-message">
        Happy Birthday 20th <br />Special gift for you
      </div>
      <button class="unlock-btn" onclick="unlockLove()">
        Unlock with Love
      </button>
    </div>

    <!-- Passcode Screen -->
    <div class="passcode-overlay" id="passcode-overlay">
      <div class="passcode-box">
        <div class="passcode-title">Happy Birthday Lock</div>
        <div class="passcode-subtitle">Name:</div>
        <div class="passcode-name">Nabila Rais Lubis</div>
        <img src="9.jpg" class="heart-img" alt="Heart" />
        <div class="passcode-display" id="passcode-display">••••••</div>
        <div class="keypad">
          <button onclick="appendNumber('1')">1</button>
          <button onclick="appendNumber('2')">2</button>
          <button onclick="appendNumber('3')">3</button>
          <button onclick="appendNumber('4')">4</button>
          <button onclick="appendNumber('5')">5</button>
          <button onclick="appendNumber('6')">6</button>
          <button onclick="appendNumber('7')">7</button>
          <button onclick="appendNumber('8')">8</button>
          <button onclick="appendNumber('9')">9</button>
          <button onclick="clearPasscode()" class="clear-btn">⌫</button>
          <button onclick="appendNumber('0')">0</button>
          <button onclick="submitPasscode()" class="submit-btn">✔</button>
        </div>
        <div class="hint">Hint: Our special date (DDMMYYYY)</div>
      </div>
    </div>

    <!-- Main Card -->
    <div class="card" id="main-card">
      <div class="header">
        <span>HAPPY BIRTHDAY! 💖</span>
        <span>♡ 📷 💌</span>
      </div>
      <div class="media">
        <div class="slider" id="slider">
          <img src="10.jpg" alt="Anniversary 1" />
          <img src="11.jpg" alt="Anniversary 2" />
          <img src="12.jpg" alt="Anniversary 3" />
          <img src="9.jpg" alt="Anniversary 4" />
        </div>
        <div class="slider-nav">
          <button onclick="prevSlide()">❮</button>
          <button onclick="nextSlide()">❯</button>
        </div>
      </div>
      <div class="message">
        <h2>TO MY GIRLFRIEND! 💝</h2>
        <div class="pink-message">
          It's your day <br />
          Happy Birthday 20th Love
        </div>
        <p>
          Celebrating another year of love, laughter, and beautiful memories
          with you. Every moment with you is a treasure, and I look forward to
          creating many more wonderful memories together. You're my everything!
        </p>
      </div>
      <div class="buttons">
        <button onclick="openGallery()">💖 Memories</button>
        <button onclick="openPuzzle()">🎁 Surprise</button>
        <button onclick="openEnvelope()">💌 Message</button>
      </div>
      <div class="footer">( Made with all my love 💕 )</div>
    </div>

    <!-- Gallery Overlay -->
    <div class="gallery-overlay" id="gallery-overlay">
      <div class="gallery-container">
        <div class="gallery-header">
          <h2 class="gallery-title">Your Beautiful Memories 💖</h2>
          <button class="close-gallery" onclick="closeGallery()">×</button>
        </div>
        <div class="gallery-grid">
          <div class="gallery-item">
            <img src="ke 1.jpg" alt="Memory 1" />
            <div class="gallery-caption">5 Oktober 2024(Kedai Roti)</div>
          </div>
          <div class="gallery-item">
            <img src="2.jpg" alt="Memory 2" />
            <div class="gallery-caption">29 September 2024(Braga)</div>
          </div>
          <div class="gallery-item">
            <img src="7.jpg" alt="Memory 3" />
            <div class="gallery-caption">4 Januari 2025(Dago Atas)</div>
          </div>
          <div class="gallery-item">
            <img src="13.jpeg" alt="Memory 4" />
            <div class="gallery-caption">21 Mei 2025 (Tubaguus Ismail)</div>
          </div>
          <div class="gallery-item">
            <img src="4.png" alt="Memory 5" />
            <div class="gallery-caption">30 April 2024(Kota Tua)</div>
          </div>
          <div class="gallery-item">
            <img src="5.jpg" alt="Memory 6" />
            <div class="gallery-caption">29 April 2024 (Gg. Spanyol)</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Envelope Overlay -->
    <div class="envelope-overlay" id="envelope-overlay">
      <button class="close-envelope" onclick="closeEnvelope()">×</button>
      <div class="envelope-container">
        <div class="envelope" id="envelope" onclick="toggleEnvelope()">
          <div class="envelope-back"></div>
          <div class="envelope-front"></div>
          <div class="envelope-flap"></div>
          <div class="letter">
            <h3>For My Girlfriend 💖</h3>
            <p>Happy Birthday my love! 💝</p>
            <p>
              Hari ini merupakan hari yang spesial untuk ayy, dimana hari ini
              merupakan hari ulang tahun yang ke 20. Berharap terbaik buat ayy.
            </p>
            <p>
              Semoga di umur yang ke 20 ini apa yang di cita-citakan tercapai,
              semoga rezeki nya juga di lancarkan, selalu di beri kesehatan.
              serta di panjangkan umurnya.
            </p>
            <p>
              I promise to keep loving you more each day, to support your
              dreams, and to create a lifetime of beautiful memories with you.
              Here's to many more years of love and happiness together!
            </p>
            <p>Forever yours,<br />Your Boyfriend 💕</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Puzzle Overlay -->
    <div class="puzzle-overlay" id="puzzle-overlay">
      <div class="puzzle-container">
        <div class="puzzle-header">
          <h2 class="puzzle-title">
            Selesaikan dulu puzzle nya baru dapat hadiah ayy 💖
          </h2>
          <button class="close-puzzle" onclick="closePuzzle()">×</button>
        </div>

        <div id="puzzle-game">
          <div class="puzzle-content">
            <p class="puzzle-message">
              Gampang banget ini puzzlenya ayy, Semangat ayy Selesainnya
            </p>

            <!-- Reference image (initially hidden) -->
            <div
              class="puzzle-reference"
              id="puzzle-reference"
              style="background-image: url('hadiah.jpg')"
            ></div>

            <div class="puzzle-board" id="puzzle-board">
              <!-- Puzzle slots will be generated here -->
            </div>

            <p class="puzzle-message">Usap dan letakkan potongan puzzlenya</p>

            <div class="puzzle-pieces" id="puzzle-pieces">
              <!-- Puzzle pieces will be generated here -->
            </div>

            <!-- Puzzle controls -->
            <div class="puzzle-controls">
              <button onclick="resetPuzzle()">Ulangi puzzle</button>
              <button onclick="toggleReference()" class="show-reference">
                Petunjuk
              </button>
            </div>
          </div>
        </div>

        <div class="puzzle-complete" id="puzzle-complete">
          <img src="hadiah.jpg" alt="Completed Puzzle" />
          <h3>Congratulations! 🎉</h3>
          <p>Yeayy Akhirnya selesai juga puzzlenya</p>
          <p>
            <a
              href="https://wa.me/6281396436609"
              target="_blank"
              rel="noopener noreferrer"
              >Lanjut Ke Whatsapp</a
            >
          </p>
          <button onclick="closePuzzle()">Close</button>
        </div>
      </div>
    </div>

    <script>
      let inputPasscode = "";
      const correctPasscode = "030924"; // Change this to your special date in DDMMYYYY format
      let currentSlide = 0;
      const slider = document.getElementById("slider");
      const slides = document.querySelectorAll(".slider img");
      const totalSlides = slides.length;
      let isEnvelopeOpen = false;
      let draggedPiece = null;
      let puzzlePieces = [];
      let puzzleSlots = [];

      // Initialize the page
      function initPage() {
        document.getElementById("love-lock").classList.remove("hidden");
        document.getElementById("passcode-overlay").style.display = "none";
        document.getElementById("main-card").style.display = "none";
      }

      // Unlock love screen
      function unlockLove() {
        const loveLock = document.getElementById("love-lock");
        loveLock.style.opacity = "0";
        loveLock.style.pointerEvents = "none";

        // Show passcode screen after a delay
        setTimeout(() => {
          document.getElementById("passcode-overlay").style.display = "flex";
        }, 500);

        // Play a sweet sound
        const unlockSound = new Audio(
          "https://assets.mixkit.co/sfx/preview/mixkit-happy-bells-notification-937.mp3"
        );
        unlockSound.volume = 0.3;
        unlockSound.play();
      }

      // Initialize slider
      function initSlider() {
        updateSlider();
      }

      function updateSlider() {
        slider.style.transform = `translateX(-${currentSlide * 100}%)`;
      }

      function nextSlide() {
        currentSlide = (currentSlide + 1) % totalSlides;
        updateSlider();
        playClickSound();
      }

      function prevSlide() {
        currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
        updateSlider();
        playClickSound();
      }

      function appendNumber(num) {
        if (inputPasscode.length < 8) {
          inputPasscode += num;
          updateDisplay();
          playClickSound();
        }
      }

      function clearPasscode() {
        if (inputPasscode.length > 0) {
          inputPasscode = inputPasscode.slice(0, -1);
          updateDisplay();
          playClickSound();
        }
      }

      function updateDisplay() {
        const display = document.getElementById("passcode-display");
        display.textContent =
          "•".repeat(inputPasscode.length) +
          " ".repeat(8 - inputPasscode.length);
        display.innerHTML = display.textContent.replace(/ /g, "&nbsp;");
      }

      function submitPasscode() {
        if (inputPasscode === correctPasscode) {
          // Success
          playSuccessSound();
          createConfetti(100);

          setTimeout(() => {
            document.getElementById("passcode-overlay").style.display = "none";
            document.getElementById("main-card").style.display = "block";
            initSlider();
          }, 1000);
        } else {
          // Wrong passcode
          playErrorSound();
          shakePasscodeBox();
          inputPasscode = "";
          updateDisplay();
        }
      }

      function playClickSound() {
        const clickSound = new Audio(
          "https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3"
        );
        clickSound.volume = 0.3;
        clickSound.play();
      }

      function playSuccessSound() {
        const successSound = new Audio(
          "https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3"
        );
        successSound.volume = 0.3;
        successSound.play();
      }

      function playErrorSound() {
        const errorSound = new Audio(
          "https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3"
        );
        errorSound.volume = 0.3;
        errorSound.play();
      }

      function shakePasscodeBox() {
        const passcodeBox = document.querySelector(".passcode-box");
        passcodeBox.style.animation = "shake 0.5s";
        setTimeout(() => {
          passcodeBox.style.animation = "";
        }, 500);
      }

      function createConfetti(count) {
        const colors = [
          "#ff85a2",
          "#ffb6c1",
          "#92b4ec",
          "#ffd166",
          "#ff9aa2",
          "#a2d2ff",
        ];

        for (let i = 0; i < count; i++) {
          const confetti = document.createElement("div");
          confetti.className = "confetti";
          confetti.style.left = Math.random() * window.innerWidth + "px";
          confetti.style.top = "-10px";
          confetti.style.backgroundColor =
            colors[Math.floor(Math.random() * colors.length)];
          document.body.appendChild(confetti);

          const animationDuration = Math.random() * 3 + 2;

          confetti.animate(
            [
              { top: "-10px", opacity: 1 },
              { top: window.innerHeight + "px", opacity: 0 },
            ],
            {
              duration: animationDuration * 1000,
              easing: "cubic-bezier(0.1, 0.8, 0.9, 1)",
            }
          );

          setTimeout(() => {
            confetti.remove();
          }, animationDuration * 1000);
        }
      }

      // Gallery Functions
      function openGallery() {
        document.getElementById("gallery-overlay").style.display = "flex";
        playClickSound();
      }

      function closeGallery() {
        document.getElementById("gallery-overlay").style.display = "none";
      }

      // Envelope Functions
      function openEnvelope() {
        document.getElementById("envelope-overlay").style.display = "flex";
        playClickSound();
        isEnvelopeOpen = false;
        document.getElementById("envelope").classList.remove("open");
      }

      function closeEnvelope() {
        document.getElementById("envelope-overlay").style.display = "none";
      }

      function toggleEnvelope() {
        const envelope = document.getElementById("envelope");
        isEnvelopeOpen = !isEnvelopeOpen;
        envelope.classList.toggle("open");

        if (isEnvelopeOpen) {
          const openSound = new Audio(
            "https://assets.mixkit.co/sfx/preview/mixkit-page-turn-single-1102.mp3"
          );
          openSound.volume = 0.3;
          openSound.play();
        }
      }

      // Puzzle Functions
      function openPuzzle() {
        document.getElementById("puzzle-overlay").style.display = "block";
        document.body.style.overflow = "hidden"; // Mencegah scroll di body utama
        playClickSound();
        initPuzzle();
      }

      function resetPuzzle() {
        playClickSound();
        document.querySelectorAll(".puzzle-slot").forEach((slot) => {
          slot.style.backgroundImage = "";
          slot.classList.remove("filled");
          slot.dataset.pieceIndex = "";
        });

        // Show all pieces again
        document.querySelectorAll(".puzzle-piece").forEach((piece) => {
          piece.style.display = "block";
        });
      }

      function closePuzzle() {
        document.getElementById("puzzle-overlay").style.display = "none";
        document.body.style.overflow = "auto"; // Mengembalikan scroll body
        // Reset puzzle when closing
        document.getElementById("puzzle-game").style.display = "block";
        document.getElementById("puzzle-complete").style.display = "none";
      }
      function toggleReference() {
        playClickSound();
        const reference = document.getElementById("puzzle-reference");
        const button = document.querySelector(".show-reference");
        if (reference.style.display === "block") {
          reference.style.display = "none";
          button.textContent = "Show Reference";
        } else {
          reference.style.display = "block";
          button.textContent = "Hide Reference";
        }
      }

      function initPuzzle() {
        const puzzleContainer = document.getElementById("puzzle-pieces");
        const boardContainer = document.getElementById("puzzle-board");

        // Clear previous puzzle
        puzzleContainer.innerHTML = "";
        boardContainer.innerHTML = "";
        puzzlePieces = [];
        puzzleSlots = [];

        // 1. Daftar URL gambar untuk setiap potongan puzzle (9 bagian)
        const pieceImages = [
          "p1.jpg", // Potongan 1 (kiri atas)
          "p2.jpg", // Potongan 2 (tengah atas)
          "p3.jpg", // Potongan 3 (kanan atas)
          "p4.jpg", // Potongan 4 (kiri tengah)
          "p5.jpg", // Potongan 5 (tengah)
          "p6.jpg", // Potongan 6 (kanan tengah)
          "p7.jpg", // Potongan 6 (kanan tengah)
          "p8.jpg", // Potongan 6 (kanan tengah)
          "p9.jpg", // Potongan 6 (kanan tengah)
        ];

        // 2. Create puzzle slots (3x3 grid)
        for (let i = 0; i < 9; i++) {
          const slot = document.createElement("div");
          slot.className = "puzzle-slot";
          slot.dataset.index = i;
          boardContainer.appendChild(slot);
          puzzleSlots.push({ element: slot, pieceIndex: null });

          // Add drop event listeners
          slot.addEventListener("dragover", (e) => {
            e.preventDefault();
          });

          slot.addEventListener("drop", (e) => {
            e.preventDefault();
            if (draggedPiece && !slot.classList.contains("filled")) {
              const pieceIndex = parseInt(draggedPiece.dataset.index);

              // Gunakan gambar potongan yang sesuai
              slot.style.backgroundImage = `url(${pieceImages[pieceIndex]})`;
              slot.style.backgroundSize = "cover"; // Tambahkan ini
              slot.classList.add("filled");
              slot.dataset.pieceIndex = pieceIndex;

              // Remove piece from pieces container
              draggedPiece.style.display = "none";

              // Check if puzzle is complete
              checkPuzzleComplete();
            }
          });
        }
        const indices = [...Array(9).keys()].sort(() => Math.random() - 0.5);

        indices.forEach((index) => {
          const piece = document.createElement("div");
          piece.className = "puzzle-piece";
          piece.dataset.index = index;
          piece.style.backgroundImage = `url(${pieceImages[index]})`;
          piece.style.backgroundSize = "cover";
          piece.draggable = true;

          piece.addEventListener("dragstart", (e) => {
            draggedPiece = piece;
            e.dataTransfer.setData("text/plain", index);
          });

          puzzleContainer.appendChild(piece);
          puzzlePieces.push({
            element: piece,
            correctIndex: index,
            imageSrc: pieceImages[index],
          });
        });

        // Hide reference initially
        document.getElementById("puzzle-reference").style.display = "none";
      }

      // 3. Create puzzle pieces (acak urutannya)
      const shuffledIndices = [...Array(9).keys()].sort(
        () => Math.random() - 0.5
      );

      shuffledIndices.forEach((index) => {
        const piece = document.createElement("div");
        piece.className = "puzzle-piece";
        piece.dataset.index = index;
        piece.style.backgroundImage = `url(${pieceImages[index]})`;
        piece.style.backgroundSize = "cover"; // Tambahkan ini
        piece.draggable = true;

        // Add drag event listeners
        piece.addEventListener("dragstart", (e) => {
          draggedPiece = piece;
          e.dataTransfer.setData("text/plain", index);
        });

        puzzleContainer.appendChild(piece);
        puzzlePieces.push({
          element: piece,
          correctIndex: index, // Menyimpan posisi yang benar
          imageSrc: pieceImages[index],
        });
      });

      // Create puzzle pieces (3x3 grid)
      const positions = [];
      for (let row = 0; row < 3; row++) {
        for (let col = 0; col < 3; col++) {
          positions.push({
            x: col * 33.33,
            y: row * 33.33,
            position: `-${col * 33.33}% -${row * 33.33}%`,
          });
        }
      }

      // Shuffle positions
      const shuffledPositions = [...positions].sort(() => Math.random() - 0.5);

      // Create pieces
      shuffledPositions.forEach((pos, index) => {
        const piece = document.createElement("div");
        piece.className = "puzzle-piece";
        piece.dataset.index = index;
        piece.style.backgroundImage = "url('hadiah.jpg')";
        piece.style.backgroundPosition = pos.position;
        piece.draggable = true;

        // Add drag event listeners
        piece.addEventListener("dragstart", (e) => {
          draggedPiece = piece;
          e.dataTransfer.setData("text/plain", index);
        });

        puzzleContainer.appendChild(piece);
        puzzlePieces.push({
          element: piece,
          correctPosition: positions[index],
          currentPosition: pos,
          imageSrc: "hadiah.jpg",
          position: pos.position,
        });
      });

      function checkPuzzleComplete() {
        const slots = document.querySelectorAll(".puzzle-slot.filled");
        if (slots.length === 9) {
          // All slots filled, check if correct
          let isComplete = true;

          slots.forEach((slot) => {
            const pieceIndex = parseInt(slot.dataset.pieceIndex);
            const slotIndex = parseInt(slot.dataset.index);

            if (pieceIndex !== slotIndex) {
              isComplete = false;
            }
          });

          if (isComplete) {
            // Puzzle completed successfully
            setTimeout(() => {
              document.getElementById("puzzle-game").style.display = "none";
              document.getElementById("puzzle-complete").style.display =
                "block";
              playSuccessSound();
              createConfetti(200);
            }, 500);
          }
        }
      }

      // Add shake animation for wrong password
      const style = document.createElement("style");
      style.textContent = `
              @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
                20%, 40%, 60%, 80% { transform: translateX(10px); }
              }
            `;
      document.head.appendChild(style);

      // Initialize the page when loaded
      window.onload = function () {
        initPage();
        updateDisplay();
      };
    </script>
  </body>
</html>
